{% extends 'frontOffice.html.twig' %}


{% block body %}
    <h1>{{ reclamation.object }}</h1>

    <table class="table">
        <tbody>

            <tr>
                <th style="color: #FFFFFF">Date: </th>
                <td style="color: #FFFFFF">{{ reclamation.date ? reclamation.date|date('Y-m-d') : '' }}</td>
            </tr>

            <tr>
                <th style="color: #FFFFFF">Theme: </th>
                <td style="color: #FFFFFF">{{ reclamation.theme }}</td>
            </tr>

            <tr>
                <th style="color: #FFFFFF">Text:</th>
                <td style="color: #FFFFFF">{{ reclamation.text }}</td>
            </tr>


        </tbody>
    </table>

    <a href="{{ path('app_reclamation_index') }}">back to list</a>





    <h2>Messages</h2>

    {% if reclamation.messages is not empty %}
        <table class="table" >

            <tbody>
            {% for message in reclamation.messages %}
                <tr style="color: #FFFFFF">
                                    {% if message.user is not null %}
                                                      <p style="color: #FFFFFF">{{ message.user.username }} the {{ message.date ? message.date|date('Y-m-d') : '' }}:</p>
                                                                     {% else %}
                                                         <p style="color: #FFFFFF">Posted by Unknown User</p>
                                       {% endif %}
                    <p style="color: #FFFFFF">   {{ message.message }}  </p>
                    <form method="post" action="{{ path('app_message_delete', {'id': message.id}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
                        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ message.id) }}">
                        <button class="btn" style="color:#d41414">Delete the previous message </button>
                    </form>

                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No messages found for this reclamation.</p>
    {% endif %}

    <h2>Add Message</h2>

    {{ form_start(messageForm) }}
    {{ form_row(messageForm.message) }}
    {{ form_widget(messageForm) }}
    <button type="submit" class="btn btn-primary">Submit</button>
    {{ form_end(messageForm) }}

    {% if not hasRating %}
        <h3>Rate our service</h3>
        {{ form_start(form) }}
        {{ form_widget(form) }}
        {{ form_end(form) }}
    {% endif %}



{% endblock %}





